<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>香港地标AR导览 - 课堂演示版</title>
    <!-- 在线依赖：顺序不可乱（A-Frame → Three.js → AR.js） -->
    <script src="https://aframe.io/releases/1.7.1/aframe.min.js"></script>
    <script src="https://unpkg.com/three/build/three.min.js"></script>
    <script src="https://unpkg.com/@ar-js-org/ar.js@latest/aframe/build/aframe-ar-nft.js"></script>
    <style>
        #landmark-text {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8); /* 黑色半透明背景 */
            color: white; /* 白色文字 */
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            z-index: 9999; /* 最上层显示，不被摄像头画面遮挡 */
            
        }

    </style>
</head>
<body style="margin: 0; overflow: hidden;">
    <!-- AR场景核心容器 -->
    <!-- 适配课堂A4纸质标记 -->
    <!-- 启用设备摄像头 -->
    <a-scene
        vr-mode-ui="enabled: false;"  
        arjs="
            trackingMethod: best; 
            detectionMode: mono_and_matrix; 
            matrixCodeType: 3x3; 
            sourceType: webcam; 
        "
    >
        <div id="landmark-text">香港地标：天坛大佛<br>海拔520米，世界最大户外青铜坐佛</div>
        <!-- 图像标记：关联香港地标（替换为课堂用标记路径） -->
        <a-marker type="pattern" url="./marker.patt">
            <!-- 3D模型：默认加载示例立方体（学生可替换为香港地标模型） -->
            <a-entity
                id="landmark-model"
                geometry="primitive: box; width: 1; height: 1; depth: 1"  
                material="color: #ff6b6b; opacity: 0.8" 
                scale="0.3 0.3 0.3"
                position="0 0 0"
                animation="property: rotation; to: 0 360 0; dur: 3000; repeat: Infinity; ease: linear"
            >
                <!-- 地标文字介绍 -->
                <a-text 
                    value="香港地标：天坛大佛" 
                    color="#58bc58" 
                    scale="3 3 3" 
                    position="0 1 0" 
                    visible="true"
                    id="landmark-text"
                ></a-text>
            </a-entity>
        </a-marker>

        <!-- 相机：必选组件（模拟人眼视角） -->
        <a-entity camera></a-entity>
    </a-scene>

    <!-- 交互脚本：点击模型显示介绍 -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const model = document.querySelector('#landmark-model');
            const textOverlay = document.getElementById('landmark-text');

            // 关键逻辑：识别到标记 → 显示文字；丢失标记 → 隐藏文字
            marker.addEventListener('markerFound', () => {
                textOverlay.style.display = 'block'; // 显示文字
            });

            marker.addEventListener('markerLost', () => {
                textOverlay.style.display = 'none'; // 隐藏文字
                console.log('⚠️ 丢失 AR 标记，文字已隐藏');
            });
            
        });
    </script>
</body>
</html>